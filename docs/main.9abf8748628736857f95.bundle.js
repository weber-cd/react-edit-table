(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={};exports.default=void 0;var _sheet=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(608)),_index=__webpack_require__(617);Object.keys(_index).forEach((function(key){"default"!==key&&"__esModule"!==key&&(Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _index[key]}}))}));var _default=_sheet.default;exports.default=_default},264:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));var _default=function Row({children:children}){return _react.default.createElement("div",{className:"row-container"},children)};exports.default=_default},265:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));var _default=props=>{const{className:className,style:style,onMouseDown:onMouseDownControl,children:children}=props;return _react.default.createElement("div",{className:className,onMouseDown:onMouseDownControl,style:style},children)};exports.default=_default},266:function(module,exports,__webpack_require__){},267:function(module,exports,__webpack_require__){},269:function(module,exports,__webpack_require__){__webpack_require__(270),__webpack_require__(416),module.exports=__webpack_require__(417)},334:function(module,exports){},417:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(268);module._StorybookPreserveDecorators=!0,Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)([__webpack_require__(607)],module)}.call(this,__webpack_require__(418)(module))},607:function(module,exports,__webpack_require__){var map={"./examples/0-Demo.stories.tsx":633};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=607},608:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_datasheet=_interopRequireDefault(__webpack_require__(609));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=props=>_react.default.createElement("div",{className:"datasheet-container"},_react.default.createElement(_datasheet.default,props));exports.default=_default},609:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_sheetComponent=_interopRequireDefault(__webpack_require__(610)),_header=_interopRequireDefault(__webpack_require__(611)),_column=_interopRequireDefault(__webpack_require__(612));__webpack_require__(616);var _lodash=_interopRequireDefault(__webpack_require__(109));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class DataSheet extends _react.default.Component{constructor(props){super(props),_defineProperty(this,"fromBodyEl",null),_defineProperty(this,"onDataSourceUpdate",(position,value)=>{const[rowIndex,key]=position;this.setState(({dataSource:predataSource})=>(this.props.onChange&&this.props.onChange({preValue:predataSource[rowIndex][key],newValue:value,rowIndex:rowIndex,key:key}),{dataSource:predataSource}))}),_defineProperty(this,"onDataRowDelete",rowIndex=>{this.props.onDelete&&this.props.onDelete({rowIndex:rowIndex})}),this.state={dataSource:(0,_lodash.default)(this.props.dataSource)||[]}}componentDidMount(){}componentWillUnmount(){}componentDidUpdate({scrollBodyOptions:scrollBodyOptions}){scrollBodyOptions&&void 0!==scrollBodyOptions.locateRow&&this.fromBodyEl&&(this.fromBodyEl.scrollTop=40*scrollBodyOptions.locateRow)}componentWillReceiveProps({dataSource:dataSource}){this.setState({dataSource:(0,_lodash.default)(dataSource)||[]})}render(){const{className:className,columns:columns,scrollBodyOptions:scrollBodyOptions,couldDeleteRow:couldDeleteRow}=this.props,styles={};if(scrollBodyOptions&&scrollBodyOptions.maxHeight)styles.maxHeight=scrollBodyOptions.maxHeight+"px",styles.overflowY="auto";else{const rowLength=this.props.dataSource.length;styles.height=40*rowLength+"px"}return _react.default.createElement("div",{className:"data-grid-container"},_react.default.createElement(_sheetComponent.default,{className:["data-grid",className].filter(a=>a).join(" ")},_react.default.createElement(_header.default,{columns:columns,couldDeleteRow:couldDeleteRow}),_react.default.createElement("div",{className:"body-container",style:styles,ref:node=>this.fromBodyEl=node},this.props.dataSource.map((dataSourceItem,index)=>_react.default.createElement(_column.default,{key:index,columns:columns,dataSourceItem:dataSourceItem,onDataSourceUpdate:this.onDataSourceUpdate,onDataRowDelete:()=>{this.onDataRowDelete(index)},rowIndex:index,couldDeleteRow:couldDeleteRow})))))}}exports.default=DataSheet,_defineProperty(DataSheet,"defaultProps",{couldDeleteRow:!0})},610:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));var _default=function Sheet({className:className,children:children}){return _react.default.createElement("div",{className:className},children)};exports.default=_default},611:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_row=_interopRequireDefault(__webpack_require__(264)),_cell=_interopRequireDefault(__webpack_require__(265));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function Header({columns:columns,couldDeleteRow:couldDeleteRow}){return _react.default.createElement(_row.default,null,columns.map(({title:title,key:key})=>_react.default.createElement(_cell.default,{key:key,className:"cell header-cell"},_react.default.createElement("span",{className:"value-viewer"},_react.default.createElement("span",{className:"value-viewer-content"},title)))),!0===couldDeleteRow&&_react.default.createElement(_cell.default,{className:"cell header-cell"},_react.default.createElement("span",{className:"value-viewer"},_react.default.createElement("span",{className:"value-viewer-content"},"删除"))))}Header.defaultProps={couldDeleteRow:!0};var _default=Header;exports.default=_default},612:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_row=_interopRequireDefault(__webpack_require__(264)),_dataCell=_interopRequireDefault(__webpack_require__(613)),_delete=_interopRequireDefault(__webpack_require__(614));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class Column extends _react.default.Component{constructor(...args){super(...args),_defineProperty(this,"onCellSubmit",(path,value)=>{this.props.onDataSourceUpdate(path,value)})}render(){const{columns:columns,dataSourceItem:dataSourceItem,rowIndex:rowIndex,couldDeleteRow:couldDeleteRow}=this.props;return _react.default.createElement(_row.default,null,columns.map(({dataIndex:dataIndex,editorRender:editorRender,valueRender:valueRender,editable:editable,suffixInfo:suffixInfo})=>_react.default.createElement(_dataCell.default,{key:dataIndex,onCellSubmit:this.onCellSubmit,cellData:dataSourceItem[dataIndex],editorRender:editorRender,className:"cell",path:[rowIndex,dataIndex],valueRender:valueRender,editable:editable,suffixInfo:suffixInfo})),!0===couldDeleteRow&&_react.default.createElement(_delete.default,{onClick:this.props.onDataRowDelete}))}}exports.default=Column,_defineProperty(Column,"defaultProps",{couldDeleteRow:!0})},613:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__(0)),_cell=_interopRequireDefault(__webpack_require__(265));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class DataCell extends _react.default.Component{constructor(...args){super(...args),_defineProperty(this,"currentTarget",null),_defineProperty(this,"state",{isEditing:!1}),_defineProperty(this,"changeEditStatus",e=>{!1!==this.props.editable&&(this.currentTarget=e.currentTarget,this.setState({isEditing:!0}))}),_defineProperty(this,"onCellValueChange",value=>{this.setState({isEditing:!1}),this.props.onCellSubmit(this.props.path,value)}),_defineProperty(this,"cellDataIsNull",cellData=>null!==cellData&&"object"==typeof cellData?null===cellData.value:null===cellData),_defineProperty(this,"isCellEditable",()=>{const{cellData:cellData,editable:editable}=this.props;return null!==cellData&&"object"==typeof cellData&&void 0!==cellData.editable?!(!1===cellData.editable):!(!1===editable)})}render(){const{editorRender:DataEditor,cellData:cellData,valueRender:valueRender,suffixInfo:SuffixInfo,path:path}=this.props;let{className:className}=this.props;return this.isCellEditable()||(className+=" read-only"),_react.default.createElement(_cell.default,_extends({},this.props,{onMouseDown:this.changeEditStatus,className:className}),this.state.isEditing&&DataEditor&&this.isCellEditable()?DataEditor({cellData:cellData,currentTarget:this.currentTarget,onSubmit:this.onCellValueChange,path:path}):_react.default.createElement("span",{className:"value-viewer"},_react.default.createElement("span",{className:"value-viewer-content"},valueRender?valueRender({cellData:cellData,path:path}):cellData)),_react.default.createElement("span",{className:"suffix-info "+(this.state.isEditing||this.cellDataIsNull(cellData)?"suffix-info-active":"")},SuffixInfo))}}exports.default=DataCell},614:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));__webpack_require__(615);var _default=function Delete(props){return _react.default.createElement("div",{className:"cell",onClick:props.onClick},_react.default.createElement("div",{className:"delete-container"},_react.default.createElement("span",{className:"table-context-delete"})))};exports.default=_default},615:function(module,exports,__webpack_require__){},616:function(module,exports,__webpack_require__){},617:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _editor=__webpack_require__(618);Object.keys(_editor).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _editor[key]}})}));var _render=__webpack_require__(619);Object.keys(_render).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _render[key]}})}));var _inputEditor=__webpack_require__(620);Object.keys(_inputEditor).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _inputEditor[key]}})}));var _selectEditor=__webpack_require__(622);Object.keys(_selectEditor).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _selectEditor[key]}})}));var _index=__webpack_require__(625);Object.keys(_index).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _index[key]}})}))},618:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckboxEditor=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));__webpack_require__(266);class CheckboxEditor extends _react.default.Component{componentDidMount(){const{checked:checked,onSubmit:onSubmit}=this.props;onSubmit(!checked)}render(){return _react.default.createElement("div",{className:"data-editor-container"},_react.default.createElement("input",{type:"checkbox",className:"checkbox-editor",onChange:()=>{console.log("onChange")}}))}}exports.CheckboxEditor=CheckboxEditor},619:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CheckboxRender=function CheckboxRender(props){const{checked:checked}=props;return _react.default.createElement("div",{className:"checkbox-render-container"},_react.default.createElement("input",{type:"checkbox",className:"checkbox-render",checked:checked,onChange:()=>{}}))};var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));__webpack_require__(266)},620:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputEditor=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));__webpack_require__(621);class InputEditor extends _react.default.Component{constructor(...args){super(...args),function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(this,"inputEl",null)}componentDidMount(){setTimeout(()=>{this.inputEl&&this.inputEl.focus()},0)}render(){const{onSubmit:onSubmit,value:value}=this.props;return _react.default.createElement("div",{className:"data-editor-container"},_react.default.createElement("input",{ref:node=>this.inputEl=node,defaultValue:value,className:"data-editor",onBlur:e=>{onSubmit(e.currentTarget.value)}}))}}exports.InputEditor=InputEditor},621:function(module,exports,__webpack_require__){},622:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectEditor=SelectEditor;var _react=_interopRequireDefault(__webpack_require__(0));__webpack_require__(623);var _portal=_interopRequireDefault(__webpack_require__(624));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}class DropDown extends _react.default.Component{constructor(...args){super(...args),_defineProperty(this,"dropdownContent",null),_defineProperty(this,"handleSelect",(e,item)=>{e&&e.stopPropagation?e.stopPropagation():window&&window.event&&(window.event.cancelBubble=!0),"object"==typeof this.props.cellData&&null!==this.props.cellData?this.props.onSubmit({...this.props.cellData,value:item.value}):this.props.onSubmit(item.value)}),_defineProperty(this,"handleBlur",()=>{this.props.onSubmit(this.props.cellData)})}componentDidMount(){setTimeout(()=>{this.dropdownContent&&this.dropdownContent.focus()},0)}render(){const{options:options,currentTarget:currentTarget}=this.props,{top:top,left:left}=currentTarget.getBoundingClientRect(),pos={left:left,top:top+40,minWidth:currentTarget.offsetWidth,zIndex:99999999999};return _react.default.createElement("div",{className:"dropdown-content",style:pos,tabIndex:1,onBlur:e=>{this.handleBlur()},ref:node=>this.dropdownContent=node},options.map((item,index)=>_react.default.createElement("div",{onClick:e=>{this.handleSelect(e,item)},className:"cell-confirm dropdown-content-item",key:index},item.text)))}}function SelectEditor(props){return _react.default.createElement("div",{className:"single-select-container"},_react.default.createElement("div",{className:"dropdown-container"},_react.default.createElement("span",{className:"placeholder"},"请选择"),_react.default.createElement(_portal.default,null,_react.default.createElement(DropDown,props))))}SelectEditor.keepEdit=!0},623:function(module,exports,__webpack_require__){},624:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0)),_reactDom=__webpack_require__(64);const doc=window.document;class Portal extends _react.default.Component{constructor(...args){super(...args),function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(this,"node",doc.createElement("div"))}render(){return null}componentDidMount(){const doc=window.document;this.node=doc.createElement("div"),this.node.className="portal",doc.body.appendChild(this.node),this.renderPortal(this.props)}componentDidUpdate(){this.renderPortal(this.props)}componentWillUnmount(){(0,_reactDom.unmountComponentAtNode)(this.node),window.document.body.removeChild(this.node)}renderPortal(props){(0,_reactDom.unstable_renderSubtreeIntoContainer)(this,_react.default.createElement(_react.default.Fragment,null,props.children),this.node)}}var _default=Portal;exports.default=_default},625:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _caretDown=__webpack_require__(626);Object.keys(_caretDown).forEach((function(key){"default"!==key&&"__esModule"!==key&&Object.defineProperty(exports,key,{enumerable:!0,get:function(){return _caretDown[key]}})}))},626:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SuffixCaretDown=function SuffixCaretDown(props){return _react.default.createElement("div",{className:"suffix-info-inner caret-down"})};var _react=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(0));__webpack_require__(627)},627:function(module,exports,__webpack_require__){},628:function(module,exports,__webpack_require__){},629:function(module,exports,__webpack_require__){},630:function(module,exports,__webpack_require__){},631:function(module,exports,__webpack_require__){},632:function(module,exports,__webpack_require__){},633:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ToStorybook",(function(){return ToStorybook}));var react=__webpack_require__(0),react_default=__webpack_require__.n(react),lib=__webpack_require__(163),lib_default=__webpack_require__.n(lib);function Sheet(_a){var className=_a.className,children=_a.children;return react_default.a.createElement("div",{className:className},children)}Sheet.__docgenInfo={description:"",methods:[],displayName:"Sheet"};var sheet_component=Sheet;try{Sheet.displayName="Sheet",Sheet.__docgenInfo={description:"",displayName:"Sheet",props:{className:{defaultValue:null,description:"",name:"className",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/sheet-component.tsx#Sheet"]={docgenInfo:Sheet.__docgenInfo,name:"Sheet",path:"src/sheet/sheet-component.tsx#Sheet"})}catch(__react_docgen_typescript_loader_error){}function Row(_a){var children=_a.children;return react_default.a.createElement("div",{className:"row-container"},children)}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/sheet-component.tsx"]={name:"Sheet",docgenInfo:Sheet.__docgenInfo,path:"src/sheet/sheet-component.tsx"}),Row.__docgenInfo={description:"",methods:[],displayName:"Row"};var row_component=Row;try{Row.displayName="Row",Row.__docgenInfo={description:"",displayName:"Row",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/row.component.tsx#Row"]={docgenInfo:Row.__docgenInfo,name:"Row",path:"src/sheet/row.component.tsx#Row"})}catch(__react_docgen_typescript_loader_error){}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/row.component.tsx"]={name:"Row",docgenInfo:Row.__docgenInfo,path:"src/sheet/row.component.tsx"});var cell_component_Cell=function Cell(props){var className=props.className,style=props.style,onMouseDownControl=props.onMouseDown,children=props.children;return react_default.a.createElement("div",{className:className,onMouseDown:onMouseDownControl,style:style},children)};cell_component_Cell.__docgenInfo={description:"",methods:[],displayName:"Cell"};var cell_component=cell_component_Cell;function Header(_a){var columns=_a.columns,couldDeleteRow=_a.couldDeleteRow;return react_default.a.createElement(row_component,null,columns.map((function(_a){var title=_a.title,key=_a.key;return react_default.a.createElement(cell_component,{key:key,className:"cell header-cell"},react_default.a.createElement("span",{className:"value-viewer"},react_default.a.createElement("span",{className:"value-viewer-content"},title)))})),!0===couldDeleteRow&&react_default.a.createElement(cell_component,{className:"cell header-cell"},react_default.a.createElement("span",{className:"value-viewer"},react_default.a.createElement("span",{className:"value-viewer-content"},"删除"))))}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/cell.component.tsx"]={name:"Cell",docgenInfo:cell_component_Cell.__docgenInfo,path:"src/sheet/cell.component.tsx"}),Header.defaultProps={couldDeleteRow:!0},Header.__docgenInfo={description:"",methods:[],displayName:"Header",props:{couldDeleteRow:{defaultValue:{value:"true",computed:!1},required:!1}}};var header_component=Header;try{Header.displayName="Header",Header.__docgenInfo={description:"",displayName:"Header",props:{columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"IColumnsItem[]"}},couldDeleteRow:{defaultValue:{value:!0},description:"",name:"couldDeleteRow",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/header.component.tsx#Header"]={docgenInfo:Header.__docgenInfo,name:"Header",path:"src/sheet/header.component.tsx#Header"})}catch(__react_docgen_typescript_loader_error){}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/header.component.tsx"]={name:"Header",docgenInfo:Header.__docgenInfo,path:"src/sheet/header.component.tsx"});var _extendStatics,__extends=(_extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},data_cell_component=function(_super){function DataCell(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.currentTarget=null,_this.state={isEditing:!1},_this.changeEditStatus=function(e){!1!==_this.props.editable&&(_this.currentTarget=e.currentTarget,_this.setState({isEditing:!0}))},_this.onCellValueChange=function(value){_this.setState({isEditing:!1}),_this.props.onCellSubmit(_this.props.path,value)},_this.cellDataIsNull=function(cellData){return null!==cellData&&"object"==typeof cellData?null===cellData.value:null===cellData},_this.isCellEditable=function(){var _a=_this.props,cellData=_a.cellData,editable=_a.editable;return null!==cellData&&"object"==typeof cellData&&void 0!==cellData.editable?!(!1===cellData.editable):!(!1===editable)},_this}return __extends(DataCell,_super),DataCell.prototype.render=function(){var _a=this.props,DataEditor=_a.editorRender,cellData=_a.cellData,valueRender=_a.valueRender,SuffixInfo=_a.suffixInfo,path=_a.path,className=this.props.className;return this.isCellEditable()||(className+=" read-only"),react_default.a.createElement(cell_component,__assign({},this.props,{onMouseDown:this.changeEditStatus,className:className}),this.state.isEditing&&DataEditor&&this.isCellEditable()?DataEditor({cellData:cellData,currentTarget:this.currentTarget,onSubmit:this.onCellValueChange,path:path}):react_default.a.createElement("span",{className:"value-viewer"},react_default.a.createElement("span",{className:"value-viewer-content"},valueRender?valueRender({cellData:cellData,path:path}):cellData)),react_default.a.createElement("span",{className:"suffix-info "+(this.state.isEditing||this.cellDataIsNull(cellData)?"suffix-info-active":"")},SuffixInfo))},DataCell}(react_default.a.Component);__webpack_require__(628);function Delete(props){return react_default.a.createElement("div",{className:"cell",onClick:props.onClick},react_default.a.createElement("div",{className:"delete-container"},react_default.a.createElement("span",{className:"table-context-delete"})))}Delete.__docgenInfo={description:"",methods:[],displayName:"Delete"};var delete_component=Delete;try{Delete.displayName="Delete",Delete.__docgenInfo={description:"",displayName:"Delete",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/delete-cell/delete.component.tsx#Delete"]={docgenInfo:Delete.__docgenInfo,name:"Delete",path:"src/sheet/delete-cell/delete.component.tsx#Delete"})}catch(__react_docgen_typescript_loader_error){}"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sheet/delete-cell/delete.component.tsx"]={name:"Delete",docgenInfo:Delete.__docgenInfo,path:"src/sheet/delete-cell/delete.component.tsx"});var column_component_extends=function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),column_component=function(_super){function Column(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.onCellSubmit=function(path,value){_this.props.onDataSourceUpdate(path,value)},_this}return column_component_extends(Column,_super),Column.prototype.render=function(){var _this=this,_a=this.props,columns=_a.columns,dataSourceItem=_a.dataSourceItem,rowIndex=_a.rowIndex,couldDeleteRow=_a.couldDeleteRow;return react_default.a.createElement(row_component,null,columns.map((function(_a){var dataIndex=_a.dataIndex,editorRender=_a.editorRender,valueRender=_a.valueRender,editable=_a.editable,suffixInfo=_a.suffixInfo;return react_default.a.createElement(data_cell_component,{key:dataIndex,onCellSubmit:_this.onCellSubmit,cellData:dataSourceItem[dataIndex],editorRender:editorRender,className:"cell",path:[rowIndex,dataIndex],valueRender:valueRender,editable:editable,suffixInfo:suffixInfo})})),!0===couldDeleteRow&&react_default.a.createElement(delete_component,{onClick:this.props.onDataRowDelete}))},Column.defaultProps={couldDeleteRow:!0},Column}(react_default.a.Component),lodash_clonedeep=(__webpack_require__(629),__webpack_require__(109)),lodash_clonedeep_default=__webpack_require__.n(lodash_clonedeep),datasheet_component_extends=function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),editor_extends=(function(_super){function DataSheet(props){var _this=_super.call(this,props)||this;return _this.fromBodyEl=null,_this.onDataSourceUpdate=function(position,value){var rowIndex=position[0],key=position[1];_this.setState((function(_a){var predataSource=_a.dataSource;return _this.props.onChange&&_this.props.onChange({preValue:predataSource[rowIndex][key],newValue:value,rowIndex:rowIndex,key:key}),{dataSource:predataSource}}))},_this.onDataRowDelete=function(rowIndex){_this.props.onDelete&&_this.props.onDelete({rowIndex:rowIndex})},_this.state={dataSource:lodash_clonedeep_default()(_this.props.dataSource)||[]},_this}datasheet_component_extends(DataSheet,_super),DataSheet.prototype.componentDidMount=function(){},DataSheet.prototype.componentWillUnmount=function(){},DataSheet.prototype.componentDidUpdate=function(_a){var scrollBodyOptions=_a.scrollBodyOptions;scrollBodyOptions&&void 0!==scrollBodyOptions.locateRow&&this.fromBodyEl&&(this.fromBodyEl.scrollTop=40*scrollBodyOptions.locateRow)},DataSheet.prototype.componentWillReceiveProps=function(_a){var dataSource=_a.dataSource;this.setState({dataSource:lodash_clonedeep_default()(dataSource)||[]})},DataSheet.prototype.render=function(){var _this=this,_a=this.props,className=_a.className,columns=_a.columns,scrollBodyOptions=_a.scrollBodyOptions,couldDeleteRow=_a.couldDeleteRow,styles={};if(scrollBodyOptions&&scrollBodyOptions.maxHeight)styles.maxHeight=scrollBodyOptions.maxHeight+"px",styles.overflowY="auto";else{var rowLength=this.props.dataSource.length;styles.height=40*rowLength+"px"}return react_default.a.createElement("div",{className:"data-grid-container"},react_default.a.createElement(sheet_component,{className:["data-grid",className].filter((function(a){return a})).join(" ")},react_default.a.createElement(header_component,{columns:columns,couldDeleteRow:couldDeleteRow}),react_default.a.createElement("div",{className:"body-container",style:styles,ref:function ref(node){return _this.fromBodyEl=node}},this.props.dataSource.map((function(dataSourceItem,index){return react_default.a.createElement(column_component,{key:index,columns:columns,dataSourceItem:dataSourceItem,onDataSourceUpdate:_this.onDataSourceUpdate,onDataRowDelete:function onDataRowDelete(){_this.onDataRowDelete(index)},rowIndex:index,couldDeleteRow:couldDeleteRow})})))))},DataSheet.defaultProps={couldDeleteRow:!0}}(react_default.a.Component),__webpack_require__(267),function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}()),editor_CheckboxEditor=function(_super){function CheckboxEditor(){return null!==_super&&_super.apply(this,arguments)||this}return editor_extends(CheckboxEditor,_super),CheckboxEditor.prototype.componentDidMount=function(){var _a=this.props,checked=_a.checked;(0,_a.onSubmit)(!checked)},CheckboxEditor.prototype.render=function(){return react_default.a.createElement("div",{className:"data-editor-container"},react_default.a.createElement("input",{type:"checkbox",className:"checkbox-editor",onChange:function onChange(){console.log("onChange")}}))},CheckboxEditor}(react_default.a.Component);function CheckboxRender(props){var checked=props.checked;return react_default.a.createElement("div",{className:"checkbox-render-container"},react_default.a.createElement("input",{type:"checkbox",className:"checkbox-render",checked:checked,onChange:function onChange(){}}))}try{CheckboxRender.displayName="CheckboxRender",CheckboxRender.__docgenInfo={description:"",displayName:"CheckboxRender",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/checkbox/render.tsx#CheckboxRender"]={docgenInfo:CheckboxRender.__docgenInfo,name:"CheckboxRender",path:"src/plugin/checkbox/render.tsx#CheckboxRender"})}catch(__react_docgen_typescript_loader_error){}CheckboxRender.__docgenInfo={description:"",methods:[],displayName:"CheckboxRender"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/checkbox/render.tsx"]={name:"CheckboxRender",docgenInfo:CheckboxRender.__docgenInfo,path:"src/plugin/checkbox/render.tsx"});__webpack_require__(630);var input_editor_extends=function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),input_editor_InputEditor=function(_super){function InputEditor(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.inputEl=null,_this}return input_editor_extends(InputEditor,_super),InputEditor.prototype.componentDidMount=function(){var _this=this;setTimeout((function(){_this.inputEl&&_this.inputEl.focus()}),0)},InputEditor.prototype.render=function(){var _this=this,_a=this.props,onSubmit=_a.onSubmit,value=_a.value;return react_default.a.createElement("div",{className:"data-editor-container"},react_default.a.createElement("input",{ref:function ref(node){return _this.inputEl=node},defaultValue:value,className:"data-editor",onBlur:function onBlur(e){onSubmit(e.currentTarget.value)}}))},InputEditor}(react_default.a.Component),react_dom=(__webpack_require__(631),__webpack_require__(64)),portal_extends=function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),doc=window.document,portal=function(_super){function Portal(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.node=doc.createElement("div"),_this}return portal_extends(Portal,_super),Portal.prototype.render=function(){return null},Portal.prototype.componentDidMount=function(){var doc=window.document;this.node=doc.createElement("div"),this.node.className="portal",doc.body.appendChild(this.node),this.renderPortal(this.props)},Portal.prototype.componentDidUpdate=function(){this.renderPortal(this.props)},Portal.prototype.componentWillUnmount=function(){Object(react_dom.unmountComponentAtNode)(this.node),window.document.body.removeChild(this.node)},Portal.prototype.renderPortal=function(props){Object(react_dom.unstable_renderSubtreeIntoContainer)(this,react_default.a.createElement(react_default.a.Fragment,null,props.children),this.node)},Portal}(react_default.a.Component),select_editor_extends=function(){var _extendStatics=function extendStatics(d,b){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),select_editor_assign=function(){return(select_editor_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},select_editor_DropDown=function(_super){function DropDown(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.dropdownContent=null,_this.handleSelect=function(e,item){e&&e.stopPropagation?e.stopPropagation():window&&window.event&&(window.event.cancelBubble=!0),"object"==typeof _this.props.cellData&&null!==_this.props.cellData?_this.props.onSubmit(select_editor_assign(select_editor_assign({},_this.props.cellData),{value:item.value})):_this.props.onSubmit(item.value)},_this.handleBlur=function(){_this.props.onSubmit(_this.props.cellData)},_this}return select_editor_extends(DropDown,_super),DropDown.prototype.componentDidMount=function(){var _this=this;setTimeout((function(){_this.dropdownContent&&_this.dropdownContent.focus()}),0)},DropDown.prototype.render=function(){var _this=this,_a=this.props,options=_a.options,currentTarget=_a.currentTarget,_b=currentTarget.getBoundingClientRect(),top=_b.top,pos={left:_b.left,top:top+40,minWidth:currentTarget.offsetWidth,zIndex:99999999999};return react_default.a.createElement("div",{className:"dropdown-content",style:pos,tabIndex:1,onBlur:function onBlur(e){_this.handleBlur()},ref:function ref(node){return _this.dropdownContent=node}},options.map((function(item,index){return react_default.a.createElement("div",{onClick:function onClick(e){_this.handleSelect(e,item)},className:"cell-confirm dropdown-content-item",key:index},item.text)})))},DropDown}(react_default.a.Component);function SelectEditor(props){return react_default.a.createElement("div",{className:"single-select-container"},react_default.a.createElement("div",{className:"dropdown-container"},react_default.a.createElement("span",{className:"placeholder"},"请选择"),react_default.a.createElement(portal,null,react_default.a.createElement(select_editor_DropDown,select_editor_assign({},props)))))}SelectEditor.keepEdit=!0;try{SelectEditor.displayName="SelectEditor",SelectEditor.__docgenInfo={description:"",displayName:"SelectEditor",props:{options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"ISelectEditorOptionItem[]"}},currentTarget:{defaultValue:null,description:"",name:"currentTarget",required:!0,type:{name:"HTMLElement"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"ExtendFiledSubmit"}},cellData:{defaultValue:null,description:"",name:"cellData",required:!0,type:{name:"TypeCellData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/select-editor/index.tsx#SelectEditor"]={docgenInfo:SelectEditor.__docgenInfo,name:"SelectEditor",path:"src/plugin/select-editor/index.tsx#SelectEditor"})}catch(__react_docgen_typescript_loader_error){}SelectEditor.__docgenInfo={description:"",methods:[],displayName:"SelectEditor"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/select-editor/index.tsx"]={name:"SelectEditor",docgenInfo:SelectEditor.__docgenInfo,path:"src/plugin/select-editor/index.tsx"});__webpack_require__(632);function SuffixCaretDown(props){return react_default.a.createElement("div",{className:"suffix-info-inner caret-down"})}try{SuffixCaretDown.displayName="SuffixCaretDown",SuffixCaretDown.__docgenInfo={description:"",displayName:"SuffixCaretDown",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/suffixInfo/caretDown/index.tsx#SuffixCaretDown"]={docgenInfo:SuffixCaretDown.__docgenInfo,name:"SuffixCaretDown",path:"src/plugin/suffixInfo/caretDown/index.tsx#SuffixCaretDown"})}catch(__react_docgen_typescript_loader_error){}SuffixCaretDown.__docgenInfo={description:"",methods:[],displayName:"SuffixCaretDown"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/plugin/suffixInfo/caretDown/index.tsx"]={name:"SuffixCaretDown",docgenInfo:SuffixCaretDown.__docgenInfo,path:"src/plugin/suffixInfo/caretDown/index.tsx"});var gradeOptions=[{value:1,text:"1年级",isActive:!1,isChecked:!1},{value:2,text:"2年级",isActive:!1,isChecked:!1},{value:3,text:"3年级",isActive:!1,isChecked:!1}],dataSource_columns=[{title:"年级",dataIndex:"grade",key:"grade",editorRender:function(_a){var cellData=_a.cellData,currentTarget=_a.currentTarget,onSubmit=_a.onSubmit;return react_default.a.createElement(SelectEditor,{cellData:cellData,currentTarget:currentTarget,options:gradeOptions,onSubmit:onSubmit})},valueRender:function(_a){return _a.cellData+"年级"},suffixInfo:react_default.a.createElement(SuffixCaretDown,null)},{title:"班级",dataIndex:"classTh",key:"classTh",editorRender:function(_a){var cellData=_a.cellData,currentTarget=_a.currentTarget,onSubmit=_a.onSubmit;return react_default.a.createElement(SelectEditor,{cellData:cellData,currentTarget:currentTarget,options:cellData.options,onSubmit:onSubmit})},valueRender:function(_a){var cellData=_a.cellData;return cellData&&(null!==cellData.value?cellData.value+"班":"请选择")},suffixInfo:react_default.a.createElement(SuffixCaretDown,null)},{title:"姓名",dataIndex:"name",key:"name",editorRender:function(_a){var cellData=_a.cellData,onSubmit=(_a.currentTarget,_a.onSubmit);return react_default.a.createElement(input_editor_InputEditor,{value:cellData,onSubmit:onSubmit})}},{title:"年龄",dataIndex:"age",key:"age",editable:!1},{title:"住址",dataIndex:"address",key:"address",editorRender:function(_a){var cellData=_a.cellData,onSubmit=(_a.currentTarget,_a.onSubmit);return react_default.a.createElement(input_editor_InputEditor,{value:cellData,onSubmit:onSubmit})}},{title:"激活",dataIndex:"start",key:"start",editorRender:function(_a){var cellData=_a.cellData,onSubmit=(_a.currentTarget,_a.onSubmit);return react_default.a.createElement(editor_CheckboxEditor,{checked:cellData,onSubmit:onSubmit})},valueRender:function(_a){var value=_a.cellData;return react_default.a.createElement(CheckboxRender,{checked:value})}}],dataSource_dataSource=[{key:"1",name:"张三",age:32,address:"高新区233",grade:"1",classTh:{value:1,options:[{value:1,text:"1班"},{value:2,text:"2班"},{value:3,text:"3班"}]},start:!1},{key:"2",name:"李四",age:42,address:"天府新区233",grade:"2",classTh:{value:1,options:[{value:1,text:"1班"},{value:2,text:"2班"}]},start:!0}],__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},ToStorybook=(__webpack_exports__.default={title:"Demo",component:lib_default.a},function(){var _a=Object(react.useState)(dataSource_dataSource),dataSourceState=_a[0],setDataSourceState=_a[1];return react_default.a.createElement(lib_default.a,{onDelete:function(_a){var rowIndex=_a.rowIndex;dataSourceState.splice(rowIndex,1),setDataSourceState(__spreadArrays(dataSourceState))},dataSource:dataSourceState,onChange:function(_a){var newValue=_a.newValue,preValue=_a.preValue,rowIndex=_a.rowIndex,key=_a.key;console.log(rowIndex,key,newValue,preValue),dataSourceState[rowIndex][key]=newValue,setDataSourceState(dataSourceState)},columns:dataSource_columns})});ToStorybook.story={name:"ReactEditableTable"}}},[[269,1,2]]]);
//# sourceMappingURL=main.9abf8748628736857f95.bundle.js.map